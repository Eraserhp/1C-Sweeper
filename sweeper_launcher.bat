@echo off
REM sweeper_launcher.bat - ?????? ??????? ? ??????? ??????

echo ========================================
echo ???????? ????? ???????:
echo ========================================
echo.
echo 1. ?????? ??????? (??? ??????????)
echo 2. ?????? Git ???????????
echo 3. ?????? ???? 1?
echo 4. ?????? ??? EDT
echo 5. Git + ???? (??? EDT)
echo 6. ????????? ????
echo 7. ????? ????? (??? ?????????????)
echo 8. ???????????? ????????????
echo 9. ?????
echo.

set /p CHOICE=???????? ????? (1-9): 

if "%CHOICE%"=="1" goto :full
if "%CHOICE%"=="2" goto :git_only
if "%CHOICE%"=="3" goto :bases_only
if "%CHOICE%"=="4" goto :edt_only
if "%CHOICE%"=="5" goto :git_bases
if "%CHOICE%"=="6" goto :configure
if "%CHOICE%"=="7" goto :silent
if "%CHOICE%"=="8" goto :config
if "%CHOICE%"=="9" exit /b 0

echo ???????? ?????!
pause
exit /b 1

:full
echo.
echo ?????? ?????? ???????...
call sweeper.bat
exit /b 0

:git_only
echo.
echo ??????? ?????? Git ????????????...
call sweeper.bat /skipdb /skipedt
exit /b 0

:bases_only
echo.
echo ??????? ?????? ??? 1?...
call sweeper.bat /skipgit /skipedt
exit /b 0

:edt_only
echo.
echo ??????? ?????? ???? EDT...
call sweeper.bat /skipgit /skipdb
exit /b 0

:git_bases
echo.
echo ??????? Git ? ??? 1?...
call sweeper.bat /skipedt
exit /b 0

:configure
echo.
set /p GIT_PATH=???? ? Git ???????????? [C:\git]: 
if "%GIT_PATH%"=="" set "GIT_PATH=C:\git"

set /p BASES_PATH=???? ? ????? 1? [C:\bases]: 
if "%BASES_PATH%"=="" set "BASES_PATH=C:\bases"

set /p EDT_PATH=???? ? EDT workspace [C:\edt]: 
if "%EDT_PATH%"=="" set "EDT_PATH=C:\edt"

set /p MAX_VER=???????????? ?????? 1? [????? = ????????????]: 

echo.
echo ?????? ? ?????????? ??????...
if "%MAX_VER%"=="" (
    call sweeper.bat /git "%GIT_PATH%" /bases "%BASES_PATH%" /edt "%EDT_PATH%"
) else (
    call sweeper.bat /git "%GIT_PATH%" /bases "%BASES_PATH%" /edt "%EDT_PATH%" /maxver %MAX_VER%
)
exit /b 0

:silent
echo.
echo ?????? ? ????? ??????...
call sweeper.bat /silent
exit /b 0

:config
echo.
set /p CONFIG_FILE=???? ? ????? ???????????? [sweeper.ini]: 
if "%CONFIG_FILE%"=="" set "CONFIG_FILE=sweeper.ini"

if not exist "%CONFIG_FILE%" (
    echo ???? ?? ??????: %CONFIG_FILE%
    pause
    exit /b 1
)

echo ?????? ? ????????????? ?? %CONFIG_FILE%...
call sweeper.bat /config "%CONFIG_FILE%"
exit /b 0